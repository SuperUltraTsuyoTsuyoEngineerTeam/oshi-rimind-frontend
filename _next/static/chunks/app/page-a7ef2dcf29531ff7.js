(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9101:function(e,t,s){Promise.resolve().then(s.bind(s,5880))},5880:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var r=s(4357),a=s(6439),l=s(2091),n=s(8892);function d(){let e=(0,l.useRouter)(),[t,s]=(0,a.useState)(""),[d,i]=(0,a.useState)([{role:"system",content:"アーニャは漫画のキャラクターで、4歳の女の子です。周囲の人間の思惑を読むことができる超能力を持っています。あなたはアーニャになりきってください。"}]),[o,u]=(0,a.useState)(void 0),[c,g]=(0,a.useState)(""),[p,m]=(0,a.useState)(""),[x,b]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=e=>{g(e.detail.title),m(e.detail.url)};return window.addEventListener("setDataFromExtension",e),()=>{window.removeEventListener("setDataFromExtension",e)}},[]);let h=async e=>{b(!0),e.preventDefault();let r=[...d,{role:"user",content:t}];i(r),s(""),console.log(r);let a=new n.Pp({apiKey:o,dangerouslyAllowBrowser:!0}),l=await a.chat.completions.create({model:"ft:gpt-3.5-turbo-0613:personal::7wDiAH8m",messages:r,stream:!0}),u="",c="assistant";for await(let e of l){var g,p,m,x,h,f;(null===(p=e.choices[0])||void 0===p?void 0:null===(g=p.delta)||void 0===g?void 0:g.role)&&(c=null===(f=e.choices[0])||void 0===f?void 0:null===(h=f.delta)||void 0===h?void 0:h.role),i([...r,{role:c,content:u+=(null===(x=e.choices[0])||void 0===x?void 0:null===(m=x.delta)||void 0===m?void 0:m.content)||""}])}b(!1)};return o?(0,r.jsxs)("div",{className:"h-screen flex flex-col bg-gray-200 dark:bg-gray-800",children:[(0,r.jsx)("div",{className:"p-4 bg-white dark:bg-gray-900 border-b border-gray-300 dark:border-gray-600",children:(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),g(""),m("")},className:"flex",children:[(0,r.jsx)("input",{value:c,onChange:e=>g(e.target.value),type:"text",id:"current-page-title",className:"flex-1 rounded p-2 mr-2 dark:bg-gray-800 dark:text-white"}),(0,r.jsx)("input",{value:p,onChange:e=>m(e.target.value),type:"text",id:"current-page-url",className:"flex-1 rounded p-2 mr-2 dark:bg-gray-800 dark:text-white"}),(0,r.jsx)("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded",children:"Add Reading List"})]})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:d.map((e,t)=>"system"!==e.role&&(0,r.jsx)("div",{className:"flex mb-2 ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"px-4 py-2 rounded-lg whitespace-pre-line flex flex-col ".concat("user"===e.role?"bg-blue-500 text-white dark:bg-blue-700":"bg-green-500 dark:bg-green-700 text-white"),children:[(0,r.jsx)("div",{className:"bg-white w-14 h-14 rounded-full p-2 mb-2 flex ".concat("user"===e.role?"justify-start":"justify-end"),children:(0,r.jsx)("img",{className:"",src:"user"===e.role?"https://1.bp.blogspot.com/-jlZlCg-8FAM/Xub_u8HTD1I/AAAAAAABZis/ZhUI05AZBEQpVinedZ6Xy-eIucmNuY2SQCNcBGAsYHQ/s1600/pose_pien_uruuru_man.png":"https://1.bp.blogspot.com/-VthzAuEo8fc/X96mhYv33UI/AAAAAAABdBs/HXCc0J0WsHUMSuQ00UZ5UuLPUXatMIq-wCNcBGAsYHQ/s831/onepiece01_luffy2.png",alt:"Icon"})}),(0,r.jsx)("div",{children:e.content})]})})},t))}),(0,r.jsx)("div",{className:"p-4 bg-gray-300 dark:bg-gray-700",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsxs)("form",{onSubmit:h,className:"flex-1 flex",children:[(0,r.jsx)("input",{value:t,onChange:e=>s(e.target.value),className:"flex-1 rounded p-2 mr-2 dark:bg-gray-800 dark:text-white",placeholder:"Enter your message..."}),(0,r.jsx)("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded",disabled:x,children:x?"Sending...":"Send"})]}),(0,r.jsx)("button",{onClick:()=>e.push("/todo-list"),className:"bg-blue-500 ml-2 text-white py-2 px-4 rounded",children:"Go to Task Management Page"})]})})]}):(0,r.jsx)("div",{className:"h-screen flex items-center justify-center bg-gray-200 dark:bg-gray-800",children:(0,r.jsxs)("div",{className:"p-4 bg-white dark:bg-gray-900 rounded shadow",children:[(0,r.jsx)("h1",{className:"text-xl mb-4",children:"Enter your OpenAI API Key"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u(e.currentTarget.apiKey.value)},children:[(0,r.jsx)("input",{name:"apiKey",type:"password",placeholder:"API Key",className:"p-2 mb-4 border rounded w-full dark:bg-gray-800 dark:text-white"}),(0,r.jsx)("button",{type:"submit",className:"bg-blue-500 text-white rounded-r p-2",children:"Send"})]})]})})}}},function(e){e.O(0,[191,702,431,744],function(){return e(e.s=9101)}),_N_E=e.O()}]);