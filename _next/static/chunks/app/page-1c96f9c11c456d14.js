(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9101:function(e,t,r){Promise.resolve().then(r.bind(r,5880))},5880:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return n}});var s=r(4357),a=r(6439),l=r(8892);function n(){let[e,t]=(0,a.useState)(""),[r,n]=(0,a.useState)([{role:"system",content:"アーニャは漫画のキャラクターで、4歳の女の子です。周囲の人間の思惑を読むことができる超能力を持っています。あなたはアーニャになりきってください。"}]),[d,i]=(0,a.useState)(void 0),[o,u]=(0,a.useState)(""),[c,g]=(0,a.useState)(""),[p,m]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=e=>{u(e.detail.title),g(e.detail.url)};return window.addEventListener("setDataFromExtension",e),()=>{window.removeEventListener("setDataFromExtension",e)}},[]);let b=async s=>{m(!0),s.preventDefault();let a=[...r,{role:"user",content:e}];n(a),t(""),console.log(a);let i=new l.Pp({apiKey:d,dangerouslyAllowBrowser:!0}),o=await i.chat.completions.create({model:"ft:gpt-3.5-turbo-0613:personal::7wDiAH8m",messages:a,stream:!0}),u="",c="assistant";for await(let e of o){var g,p,b,h,x,f;(null===(p=e.choices[0])||void 0===p?void 0:null===(g=p.delta)||void 0===g?void 0:g.role)&&(c=null===(f=e.choices[0])||void 0===f?void 0:null===(x=f.delta)||void 0===x?void 0:x.role),n([...a,{role:c,content:u+=(null===(h=e.choices[0])||void 0===h?void 0:null===(b=h.delta)||void 0===b?void 0:b.content)||""}])}m(!1)};return d?(0,s.jsxs)("div",{className:"h-screen flex flex-col bg-gray-200 dark:bg-gray-800",children:[(0,s.jsx)("div",{className:"p-4 bg-white dark:bg-gray-900 border-b border-gray-300 dark:border-gray-600",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u(""),g("")},className:"flex",children:[(0,s.jsx)("input",{value:o,onChange:e=>u(e.target.value),type:"text",id:"current-page-title",className:"flex-1 rounded p-2 mr-2 dark:bg-gray-800 dark:text-white"}),(0,s.jsx)("input",{value:c,onChange:e=>g(e.target.value),type:"text",id:"current-page-url",className:"flex-1 rounded p-2 mr-2 dark:bg-gray-800 dark:text-white"}),(0,s.jsx)("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded",children:"Add Reading List"})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:r.map((e,t)=>"system"!==e.role&&(0,s.jsx)("div",{className:"flex mb-2 ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"px-4 py-2 rounded-lg whitespace-pre-line flex flex-col ".concat("user"===e.role?"bg-blue-500 text-white dark:bg-blue-700":"bg-green-500 dark:bg-green-700 text-white"),children:[(0,s.jsx)("div",{className:"bg-white w-14 h-14 rounded-full p-2 mb-2 flex ".concat("user"===e.role?"justify-start":"justify-end"),children:(0,s.jsx)("img",{className:"",src:"user"===e.role?"https://1.bp.blogspot.com/-jlZlCg-8FAM/Xub_u8HTD1I/AAAAAAABZis/ZhUI05AZBEQpVinedZ6Xy-eIucmNuY2SQCNcBGAsYHQ/s1600/pose_pien_uruuru_man.png":"https://1.bp.blogspot.com/-VthzAuEo8fc/X96mhYv33UI/AAAAAAABdBs/HXCc0J0WsHUMSuQ00UZ5UuLPUXatMIq-wCNcBGAsYHQ/s831/onepiece01_luffy2.png",alt:"Icon"})}),(0,s.jsx)("div",{children:e.content})]})})},t))}),(0,s.jsx)("div",{className:"p-4 bg-gray-300 dark:bg-gray-700",children:(0,s.jsxs)("form",{onSubmit:b,className:"flex",children:[(0,s.jsx)("input",{value:e,onChange:e=>t(e.target.value),className:"flex-1 rounded p-2 mr-2 dark:bg-gray-800 dark:text-white",placeholder:"Enter your message..."}),(0,s.jsx)("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded",disabled:p,children:p?"Sending...":"Send"})]})})]}):(0,s.jsx)("div",{className:"h-screen flex items-center justify-center bg-gray-200 dark:bg-gray-800",children:(0,s.jsxs)("div",{className:"p-4 bg-white dark:bg-gray-900 rounded shadow",children:[(0,s.jsx)("h1",{className:"text-xl mb-4",children:"Enter your OpenAI API Key"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i(e.currentTarget.apiKey.value)},children:[(0,s.jsx)("input",{name:"apiKey",type:"password",placeholder:"API Key",className:"p-2 mb-4 border rounded w-full dark:bg-gray-800 dark:text-white"}),(0,s.jsx)("button",{type:"submit",className:"bg-blue-500 text-white rounded-r p-2",children:"Send"})]})]})})}}},function(e){e.O(0,[900,702,431,744],function(){return e(e.s=9101)}),_N_E=e.O()}]);