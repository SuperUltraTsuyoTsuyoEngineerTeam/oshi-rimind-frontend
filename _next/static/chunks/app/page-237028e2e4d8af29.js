(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1160:function(e,t,s){Promise.resolve().then(s.bind(s,1117))},1117:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Home}});var a=s(2987),l=s(7317),r=s(6396),n=s(6475);function Home(){let e=(0,r.useRouter)(),[t,s]=(0,l.useState)(""),[o,d]=(0,l.useState)([{role:"system",content:"アーニャは漫画のキャラクターで、4歳の女の子です。周囲の人間の思惑を読むことができる超能力を持っています。あなたはアーニャになりきってください。"}]),[i,c]=(0,l.useState)(),[u,h]=(0,l.useState)(""),[m,b]=(0,l.useState)(""),[x,g]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let handleDataEvent=e=>{h(e.detail.title),b(e.detail.url)};return window.addEventListener("setDataFromExtension",handleDataEvent),()=>{window.removeEventListener("setDataFromExtension",handleDataEvent)}},[]);let handleSubmit=async e=>{g(!0),e.preventDefault();let a=[...o,{role:"user",content:t}];d(a),s(""),console.log(a);let l=new n.Pp({apiKey:i,dangerouslyAllowBrowser:!0}),r=await l.chat.completions.create({model:"ft:gpt-3.5-turbo-0613:personal::7x803BiH",messages:a,stream:!0}),c="",u="assistant";for await(let e of r){var h,m,b,x,p,f;(null===(m=e.choices[0])||void 0===m?void 0:null===(h=m.delta)||void 0===h?void 0:h.role)&&(u=null===(f=e.choices[0])||void 0===f?void 0:null===(p=f.delta)||void 0===p?void 0:p.role),d([...a,{role:u,content:c+=(null===(x=e.choices[0])||void 0===x?void 0:null===(b=x.delta)||void 0===b?void 0:b.content)||""}])}g(!1)};return i?(0,a.jsxs)("div",{className:"h-screen flex flex-col bg-gray-200 dark:bg-gray-800",children:[(0,a.jsx)("div",{className:"p-4 bg-white dark:bg-gray-900 border-b border-gray-300 dark:border-gray-600",children:(0,a.jsx)("h1",{className:"text-3xl text-black text-center font-bold",children:"OshiRemind"})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:o.map((e,t)=>"system"!==e.role&&(0,a.jsx)("div",{className:"flex mb-2 ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"px-4 py-2 rounded-lg whitespace-pre-line flex flex-col ".concat("user"===e.role?"bg-blue-500 text-white dark:bg-blue-700":"bg-green-500 dark:bg-green-700 text-white"),children:[(0,a.jsx)("div",{className:"bg-white w-14 h-14 rounded-full p-2 mb-2 flex ".concat("user"===e.role?"justify-start":"justify-end"),children:(0,a.jsx)("img",{className:"",src:"user"===e.role?"https://1.bp.blogspot.com/-jlZlCg-8FAM/Xub_u8HTD1I/AAAAAAABZis/ZhUI05AZBEQpVinedZ6Xy-eIucmNuY2SQCNcBGAsYHQ/s1600/pose_pien_uruuru_man.png":"https://1.bp.blogspot.com/-VthzAuEo8fc/X96mhYv33UI/AAAAAAABdBs/HXCc0J0WsHUMSuQ00UZ5UuLPUXatMIq-wCNcBGAsYHQ/s831/onepiece01_luffy2.png",alt:"Icon"})}),(0,a.jsx)("div",{children:e.content})]})})},t))}),(0,a.jsx)("div",{className:"p-4 bg-gray-300 dark:bg-gray-700",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"flex-1 flex",children:[(0,a.jsx)("input",{value:t,onChange:e=>s(e.target.value),className:"flex-1 rounded p-2 mr-2 dark:bg-gray-800 dark:text-white",placeholder:"Enter your message..."}),(0,a.jsx)("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded",disabled:x,children:x?"Sending...":"Send"})]}),(0,a.jsx)("button",{onClick:()=>e.push("/todo-list"),className:"bg-blue-500 ml-2 text-white py-2 px-4 rounded",children:"Go to Task Management Page"})]})})]}):(0,a.jsx)("div",{className:"h-screen flex items-center justify-center bg-gray-200 dark:bg-gray-800",children:(0,a.jsxs)("div",{className:"p-4 bg-white dark:bg-gray-900 rounded shadow",children:[(0,a.jsx)("h1",{className:"text-xl mb-4",children:"Enter your OpenAI API Key"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),c(e.currentTarget.apiKey.value)},children:[(0,a.jsx)("input",{name:"apiKey",type:"password",placeholder:"API Key",className:"p-2 mb-4 border rounded w-full dark:bg-gray-800 dark:text-white"}),(0,a.jsx)("button",{type:"submit",className:"bg-blue-500 text-white rounded-r p-2",children:"Send"})]})]})})}}},function(e){e.O(0,[371,195,338,744],function(){return e(e.s=1160)}),_N_E=e.O()}]);